'use strict';


/* Controllers */


var ejsApp = angular.module('ejsApp', ['ngTable']);

// Creates ejsApp.controller
ejsApp.controller('ejsListCtrl', function($scope, $http, $filter, ngTableParams) {
  
	//Hardcoded JSON data for testing purposes. Intention in end is for data to be requested via http
	//var data = [{"id":"4JGlEQFRS4KmEr0yhqZUNA","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:52 [EDICUFER] Attachment","sentDate":"Mon, 19 May 2014 10:53:00 +1000"},{"id":"677svPL6RHCsdYsqLAkGeA","sender":"todd.tester@mail139.wdc04.mandrillapp.com","recipients":["fred.developer@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:52 [EDICUFER] To Developer","sentDate":"Mon, 19 May 2014 10:52:58 +1000"},{"id":"DXmceFUPSriGrLAYaBhpSw","sender":"todd.tester@mail139.wdc04.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:52 [EDICUFER] Simple Text","sentDate":"Mon, 19 May 2014 10:52:57 +1000"},{"id":"P0PRct7ERHShKZ4DRL6BVQ","sender":"todd.tester@mail139.wdc04.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:52 [EDICUFER] Simple HTML","sentDate":"Mon, 19 May 2014 10:52:57 +1000"},{"id":"Qfnvdj4yRyWyJ5CXLcq-nA","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:52 [EDICUFER] Empty body","sentDate":"Mon, 19 May 2014 10:52:56 +1000"},{"id":"aiZEW61HSOGw5u70WW47hA","sender":"todd.tester@mail139.wdc04.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:51 [XYHJJAPI] Attachment","sentDate":"Mon, 19 May 2014 10:51:43 +1000"},{"id":"aNrShsD3Ss2stdE52YGGvQ","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["fred.developer@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:51 [XYHJJAPI] To Developer","sentDate":"Mon, 19 May 2014 10:51:40 +1000"},{"id":"a83NzdTfQtylZLZVG4QQTQ","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:51 [XYHJJAPI] Simple Text","sentDate":"Mon, 19 May 2014 10:51:39 +1000"},{"id":"pZRh4Q-cQl2P7d2SKzbBQQ","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:51 [XYHJJAPI] Simple HTML","sentDate":"Mon, 19 May 2014 10:51:39 +1000"},{"id":"If_ryWglQDGDUeUb-Nhj2Q","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 10:51 [XYHJJAPI] Empty body","sentDate":"Mon, 19 May 2014 10:51:38 +1000"},{"id":"OCQ49adgRFe48QyuwmCylw","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:41 [XBVJGRQM] Attachment","sentDate":"Mon, 19 May 2014 09:41:06 +1000"},{"id":"v9otapU6RtShIPFwHOmN7Q","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["fred.developer@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:41 [XBVJGRQM] To Developer","sentDate":"Mon, 19 May 2014 09:41:03 +1000"},{"id":"YjGUcZLLS66WSipFzyTvXA","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:41 [XBVJGRQM] Simple HTML","sentDate":"Mon, 19 May 2014 09:41:02 +1000"},{"id":"6JyLnMoeRcqDjxjN1JtirQ","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:41 [XBVJGRQM] Simple Text","sentDate":"Mon, 19 May 2014 09:41:02 +1000"},{"id":"manSyBDMSQ6tDeKoHfyEig","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:41 [XBVJGRQM] Empty body","sentDate":"Mon, 19 May 2014 09:41:01 +1000"},{"id":"KMms7apZR4msN6exPDDi7A","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:24 [NMLNPKNK] Attachment","sentDate":"Mon, 19 May 2014 09:23:59 +1000"},{"id":"IghI1STgTJigsmR4L0H7Jw","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["fred.developer@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:24 [NMLNPKNK] To Developer","sentDate":"Mon, 19 May 2014 09:23:57 +1000"},{"id":"5AL8kixyQ02cis3eVXD0Vw","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:24 [NMLNPKNK] Simple HTML","sentDate":"Mon, 19 May 2014 09:23:56 +1000"},{"id":"qO_tRzSiTX6c4-LgBtLZrA","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:24 [NMLNPKNK] Simple Text","sentDate":"Mon, 19 May 2014 09:23:56 +1000"},{"id":"Gs-tJvxaQqatr_ETJ8VZ2A","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:24 [NMLNPKNK] Empty body","sentDate":"Mon, 19 May 2014 09:23:55 +1000"},{"id":"IiX9MAcDT3mXGgCoBeT5yw","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"FW: [YNNWOKZZ] [Office365] Threading Test","sentDate":"Mon, 19 May 2014 09:22:56 +1000"},{"id":"LbvK2VOpTfO-4R2EbLS9Fg","sender":"fred.developer@mites.onmicrosoft.com","recipients":["todd.tester@mites.onmicrosoft.com"],"subject":"RE: [YNNWOKZZ] [Office365] Threading Test","sentDate":"Mon, 19 May 2014 09:22:22 +1000"},{"id":"DKp1ih2GT56xs2qfOa3aoQ","sender":"todd.tester@mites.onmicrosoft.com","recipients":["fred.developer@mites.onmicrosoft.com"],"subject":"[YNNWOKZZ] [Office365] Threading Test","sentDate":"Mon, 19 May 2014 09:21:50 +1000"},{"id":"7vPOEKAOR3iB2owExEQfNQ","sender":"todd.tester@mites.onmicrosoft.com","recipients":["IT@mites.onmicrosoft.com","bob.architect@mites.onmicrosoft.com","fred.developer@mites.onmicrosoft.com","dev@mites.onmicrosoft.com"],"subject":"19-05-2014 09:21 [Office365] Send to dynamic distribution group","sentDate":"Mon, 19 May 2014 09:21:03 +1000"},{"id":"Q_UpanJqSKu1eNEsijzAEQ","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"FW: 19-05-2014 09:17 [Office365] Send as Fred to Distribution Group, CC BCC, Attachment, Distribution Group19-05-2014 09:20","sentDate":"Mon, 19 May 2014 09:20:12 +1000"},{"id":"sIpISHomQI-uSCPb914XjQ","sender":"fred.developer@mites.onmicrosoft.com","recipients":["dev@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com","bob.architect@mites.onmicrosoft.com","alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:17 [Office365] Send as Fred to Distribution Group, CC BCC, Attachment, Distribution Group","sentDate":"Mon, 19 May 2014 09:17:51 +1000"},{"id":"03_95E0iRT-eK8a6Tl-JCg","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:16 [Office365 YEHIONDM] A test with two image attachments","sentDate":"Mon, 19 May 2014 09:16:36 +1000"},{"id":"Pg-KxCDNQmS-C0Kl3NvBow","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:16 [Office365 YEHIONDM] An important email to 2 recipients","sentDate":"Mon, 19 May 2014 09:16:10 +1000"},{"id":"whaGkiRCQzK4c-qjDRZHdg","sender":"todd.tester@mites.onmicrosoft.com","recipients":["clinicwise@outlook.com"],"subject":"19-05-2014 09:16 [Office365 YEHIONDM] An important email to 2 recipients","sentDate":"Mon, 19 May 2014 09:16:10 +1000"},{"id":"jfu0CoLYR2SS1O3S0xk8Lw","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:15 [Office365 YEHIONDM] A CC Email","sentDate":"Mon, 19 May 2014 09:15:54 +1000"},{"id":"BboAiQH4TLa0Xv1bKZ0zrg","sender":"todd.tester@mites.onmicrosoft.com","recipients":["zhimin.zhan@melbourneit.com.au"],"subject":"19-05-2014 09:15 [Office365 YEHIONDM] A CC Email","sentDate":"Mon, 19 May 2014 09:15:54 +1000"},{"id":"hVFTkax3SgG7lqF-a2Aepg","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:15 [Office365 YEHIONDM] Plain Text Email","sentDate":"Mon, 19 May 2014 09:15:37 +1000"},{"id":"Q47ahspQTN2gtPrisGDtUQ","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:15 [Office365 YEHIONDM] HTML Email","sentDate":"Mon, 19 May 2014 09:15:22 +1000"},{"id":"jGxJkJ0ETda3ouBxUTCbow","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:10 [KQFHUJLS] Attachment","sentDate":"Mon, 19 May 2014 09:10:46 +1000"},{"id":"5d3z8u5CTNe4zrgJxPzRyg","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:10 [KQFHUJLS] Simple HTML","sentDate":"Mon, 19 May 2014 09:10:43 +1000"},{"id":"IAPyXMs9T169Ihu9ui7e1A","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["fred.developer@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:10 [KQFHUJLS] To Developer","sentDate":"Mon, 19 May 2014 09:10:43 +1000"},{"id":"kb_U-g3gTxuMlpboo038hw","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:10 [KQFHUJLS] Empty body","sentDate":"Mon, 19 May 2014 09:10:42 +1000"},{"id":"p8_2KBqrQQiFHfuY6B45tQ","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"19-05-2014 09:10 [KQFHUJLS] Simple Text","sentDate":"Mon, 19 May 2014 09:10:42 +1000"},{"id":"Sp83gCn2QfCl1L23QameuQ","sender":"fred.developer@mites.onmicrosoft.com","recipients":["todd.tester@mites.onmicrosoft.com"],"subject":"RE: [NVGXYFHC] [Office365] Threading Test","sentDate":"Mon, 19 May 2014 09:09:03 +1000"},{"id":"JsISTsa9RxOJyZyPEXPjgw","sender":"todd.tester@mites.onmicrosoft.com","recipients":["IT@mites.onmicrosoft.com","bob.architect@mites.onmicrosoft.com","fred.developer@mites.onmicrosoft.com","dev@mites.onmicrosoft.com"],"subject":"19-05-2014 09:07 [Office365] Send to dynamic distribution group","sentDate":"Mon, 19 May 2014 09:07:46 +1000"},{"id":"J9LeettpQbGGtwA_K4Df2A","sender":"fred.developer@mites.onmicrosoft.com","recipients":["dev@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com","bob.architect@mites.onmicrosoft.com","alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:04 [Office365] Send as Fred to Distribution Group, CC BCC, Attachment, Distribution Group","sentDate":"Mon, 19 May 2014 09:04:38 +1000"},{"id":"DcMQ5G_LSlCXHwNN5UcWxw","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:02 [Office365 QDSFEXFZ] A CC Email","sentDate":"Mon, 19 May 2014 09:02:37 +1000"},{"id":"FkbNeUO8Sg6EdpTbLBoSFQ","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"19-05-2014 09:02 [Office365 QDSFEXFZ] Plain Text Email","sentDate":"Mon, 19 May 2014 09:02:20 +1000"},{"id":"ZOC9ES5VSN-aHJImFCn-2w","sender":"todd.tester@mail114.us4.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"16-05-2014 15:21 [SFUPBHSQ] Attachment","sentDate":"Fri, 16 May 2014 15:22:07 +1000"},{"id":"0I4LSpmFTueWiphK3NNU8Q","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["fred.developer@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"16-05-2014 15:21 [SFUPBHSQ] To Developer","sentDate":"Fri, 16 May 2014 15:22:04 +1000"},{"id":"ihzIk_ZsSwyEudH2ZmCL6w","sender":"todd.tester@mail128-8.atl41.mandrillapp.com","recipients":["alice.manager@mites.onmicrosoft.com","todd.tester@mites.onmicrosoft.com"],"subject":"16-05-2014 15:21 [SFUPBHSQ] Simple Text","sentDate":"Fri, 16 May 2014 15:22:03 +1000"},{"id":"s06c5i8RSo20mQbRAJUsHA","sender":"todd.tester@mites.onmicrosoft.com","recipients":["fred.developer@mites.onmicrosoft.com"],"subject":"[TNLEBRHJ] [Office365] Threading Test","sentDate":"Fri, 16 May 2014 15:19:56 +1000"},{"id":"uJ1oQdXWRjatBtYTd-L1Zw","sender":"todd.tester@mites.onmicrosoft.com","recipients":["alice.manager@mites.onmicrosoft.com"],"subject":"16-05-2014 15:14 [Office365 XSQHIVKI] A test with two image attachments","sentDate":"Fri, 16 May 2014 15:14:55 +1000"},{"id":"VQwY6CkySnOE8FsgrZO_Pw","sender":"todd.tester@mites.onmicrosoft.com","recipients":["clinicwise@outlook.com"],"subject":"16-05-2014 15:14 [Office365 XSQHIVKI] An important email to 2 recipients","sentDate":"Fri, 16 May 2014 15:14:30 +1000"}];
   
	// Gets a remote resource containing email data in JSON format
	$http.get('angular/models/emails.json').success(function(data) {
	
	// Turns the remote resource data into the main data for ejsApp controller
	$scope.emails = data;
	
	// Creates an ng-table & parameters from remote resource data
	$scope.tableParams = new ngTableParams({
                page: 1,            // show first page
                count: 10,           // count per page
				sorting: {
                   // sentDate: 'asc'      initial sorting
                }
            }, {
                total: data.length, // length of data
				counts: [10, 25, 50, 100],
                getData: function($defer, params) {
					// use built angular filter
                    var orderedData = params.sorting() ?
                        $filter('orderBy')(data, params.orderBy()) :
                        data;
										
                    $defer.resolve(orderedData.slice((params.page() - 1) * params.count(), params.page() * params.count()));
            }
			
            }); // End of creation of ng-table & parameters
	
	}); // End of Get request
	
}); // End of creation of ejsApp.controller
